// ccf-engine.cfg v1.0.0.0
// Coyote Cargo Freighter (CCF)
// created: 22 Apr 2017
// updated: 28 Aug 2022

// this file: CC BY-ND 4.0 by zer0Kerbal

PART
{
	name = ccf-engine
	//CISfreighterengine
	module = Part
	author = dboi88 and zer0Kerbal

	MODEL 
	{
		model = CoyoteSpace/CoyoteCargoFreighter/Assets/engine
	}
	scale = 1
	rescaleFactor = 1
	bulkheadProfiles = size3

	CoMOffset = 1.636762, 0.0, -1.754828

	attachRules = 1,1,1,1,1 // 1,0,1,0,0
	NODE
	{
		name = EngineNodeB
		transform = EngineNodeB
		size = 3
		method = FIXED_JOINT 
	}

	TechRequired = veryHeavyRocketry
	entryCost = 64000 // 6400
	cost = 35000
	category = Engine
	subcategory = 0

	title = #CCF-engine-titl
	manufacturer = #CSI-Agency-titl
	description = #CCF-engine-desc
	tags = #autoLOC_500438

	mass = 400

	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2

	maxTemp = 2500 // = 3000
	heatConductivity = 0.06 // half default
	skinInternalConductionMult = 4.0
	emissiveConstant = 0.85 // engine nozzles are good at radiating, NTRs even better
	radiatorMax = 0.35 //Default = 0.25 but nuke engines are meant to run hot

	crashTolerance = 25 // 7
	breakingForce = 300 // 30000
	breakingTorque = 300 // 30000

	EFFECTS
	{
		running_closed
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_spurts
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.2
				pitch = 1.0 1.0
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = CoyoteSpace/CoyoteCargoFreighter/FX/csi1846FX
				transformName = thrustTransform1
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.5
				speed = 1.0 1.2
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform1
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}

	MODULE
	{
		name = ModuleEnginesFX
		engineID = KS25
		runningEffectName = running_closed
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 120000
		heatProduction = 1000 // 192
		fxOffset = 0, 0, 0.25
		EngineType = LiquidFuel
		exhaustDamageDistanceOffset = 1.9
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 0.9
			DrawGauge = True
		}
		PROPELLANT
		{
			name = ElectricCharge
			ratio = 1
			ignoreForIsp = True					
			DrawGauge = True
		}
		atmosphereCurve
		{
			key = 0 5015
			key = 1 5095
			key = 12 0.001
		}
	}

	MODULE
	{
		name = ModuleColorChanger
		shaderProperty = _EmissiveColor
		animRate = 0.8
		animState = False
		useRate = True
		toggleInEditor = True
		toggleInFlight = True
		toggleInFlight = True
		unfocusedRange = 5
		toggleName = #CFF-MCC-name
		eventOnName = #CFF-MCC-strt
		eventOffName = #CFF-MCC-stop
		toggleAction = True
		defaultActionGroup = Light
		redCurve
		{
			key = 0 0 0 3
			key = 1 1 0 0
		}
		greenCurve
		{
			key = 0 0 0 1
			key = 1 1 1 0
		}
		blueCurve
		{
			key = 0 0 0 0
			key = 1 0.7 1.5 0
		}
		alphaCurve
		{
			key = 0 1
		}
	}

	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = enginelights
		responseSpeed = 1
	}

	MODULE
	{
		name = ModuleAnimateHeat
		ThermalAnim = overheat
	}

	MODULE
	{
		name = ModuleAlternator
		RESOURCE
		{
			name = ElectricCharge
			rate = 5.0
		}
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.7
		maxDistance = 50
		falloff = 2.5
		thrustTransformName = thrustTransform
	}

	LVolume = 753425.8

	RESOURCE
	{
		name = ElectricCharge
		amount = 5000
		maxAmount = 5000
	}

	DRAG_CUBE
	{
		cube = Default, 44.78,0.7684,14.67, 44.78,0.7649,14.32, 72.03,0.9904,7.413, 72.03,0.9398,6.237, 115.6,0.975,4.941, 115.6,0.9711,4.941, 1.642,1.787,-1.75, 14.83,9.802,5.184
	}
}